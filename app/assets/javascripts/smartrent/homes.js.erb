// Place all the behaviors and hooks related to the matching controller here.
// All this logic will automatically be available in application.js.
var pois = {};
var categories = [];
var cat_counter = 1;
var mapIcon = "homeIcon"
categories.push('all');
pois['all'] = {'show':true,'points':[]};
$(function(){
  $(".search-item").click(function(){
    if (this.id == 'listResults' && $(this).hasClass('listOff')) {
      $(this).removeClass('listOff').addClass('listOn')
      $(this).siblings().removeClass('mapOn').addClass('mapOff')
      $('.map-results').hide(function(){
        $('.listing-results').show();
      });
    }
    else if (this.id == 'mapResults' && $(this).hasClass('mapOff')) {
      $(this).removeClass('mapOff').addClass('mapOn')
      $(this).siblings().removeClass('listOn').addClass('listOff')
      $('.listing-results').hide(function(){
        $('.map-results').show();
        var map_results_html = $('.map-results').html();
        map_results_html = map_results_html.replace(/\n/g, "").replace(/ /g, "")
        if (map_results_html == '')
        {
          page = 1
          if (urlParams['page'])
            page = urlParams['page']
          homes_path = Routes.smartrent_homes_path({format: "json", page: page})
          $.get(homes_path, function(data){
            homes = data;
            pois['all'] = {'show':true,'points':[]};
            for(var x in homes) {
              var home = homes[x]
              pois['all']['points'].push({
                  title: home.title,
                  description: home.description,
                  address: home.street_address + ',' + home.city + ',' + home.state + ' ' + home.postal_code,
                  lat: home.latitude,
                  lon: home.longitude,
                  //image: home.left_image,
                  //image_link: home.left_image
              });
            }
            mapStart();
          });
        }
      });

    }
  })
})
var Home = {
  "showFloorPlan": function(floor_id){
    $('.fpImageHolder .more_homeFPImages').hide();
    $('#' + floor_id).show();
  }
}
